# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è AMO CRM –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è URL

## üéØ –©–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

- [x] Redirect URI –≤ AMO CRM: `https://admin.foryou-realestate.com/api/amo-crm/callback`
- [x] –î—Ä—É–≥–µ –ø–æ–ª–µ (Disconnect/Webhook): `https://admin.foryou-realestate.com/api/amo-crm/disconnect`

---

## üìã –ö—Ä–æ–∫–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 1Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É AMO CRM (–¥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è)

**–í –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ CRM —Å—Ç–æ—Ä—ñ–Ω–∫—É
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Å—Ç–∞—Ç—É—Å "–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ" –∞–±–æ "–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ"
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—ñ

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
- –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ 404 –∞–±–æ 500

---

### 2Ô∏è‚É£ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è OAuth flow (–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è AMO CRM)

**–ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**
1. –í –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ AMO CRM"
2. –ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è –±—Ä–∞—É–∑–µ—Ä –∑ —Ñ–æ—Ä–º–æ—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó AMO CRM

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è
- –§–æ—Ä–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó AMO CRM –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
- URL –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –º—ñ—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

---

**–ö—Ä–æ–∫ 2: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –≤ AMO CRM**
1. –í–≤–µ–¥—ñ—Ç—å –ª–æ–≥—ñ–Ω —Ç–∞ –ø–∞—Ä–æ–ª—å AMO CRM
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ê–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏" –∞–±–æ "–î–æ–∑–≤–æ–ª–∏—Ç–∏ –¥–æ—Å—Ç—É–ø"

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–æ
- AMO CRM –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ `https://admin.foryou-realestate.com/api/amo-crm/callback?code=...`

---

**–ö—Ä–æ–∫ 3: Callback –æ–±—Ä–æ–±–∫–∞**
1. Backend –æ—Ç—Ä–∏–º—É—î callback –∑ `code`
2. Backend –æ–±–º—ñ–Ω—é—î `code` –Ω–∞ —Ç–æ–∫–µ–Ω–∏
3. Backend –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ deep link `foryoure://amo-crm/callback?code=...`

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Backend —É—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–ª—è—î callback
- –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ deep link –ø—Ä–∞—Ü—é—î
- –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –æ—Ç—Ä–∏–º—É—î callback

---

**–ö—Ä–æ–∫ 4: –û–±—Ä–æ–±–∫–∞ –≤ –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É**
1. –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –æ—Ç—Ä–∏–º—É—î deep link –∑ `code`
2. –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –≤–∏–∫–ª–∏–∫–∞—î `POST /api/amo-crm/exchange-code` –∑ JWT —Ç–æ–∫–µ–Ω–æ–º
3. Backend –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ —É—Å–ø—ñ—à–Ω–æ –æ–±—Ä–æ–±–ª—è—î callback
- Endpoint `POST /api/amo-crm/exchange-code` –ø—Ä–∞—Ü—é—î
- –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –°—Ç–∞—Ç—É—Å AMO CRM –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ "–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ"

---

### 3Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É AMO CRM (–ø—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è)

**–í –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É:**
1. –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ CRM —Å—Ç–æ—Ä—ñ–Ω–∫—É
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å AMO CRM

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å: "–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ"
- –í—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è domain —Ç–∞ accountId
- –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫

**API —Ç–µ—Å—Ç:**
```bash
curl -X GET https://admin.foryou-realestate.com/api/amo-crm/status \
  -H "Authorization: Bearer <user_jwt_token>"
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "data": {
    "connected": true,
    "hasTokens": true,
    "domain": "reforyou.amocrm.ru",
    "accountId": "31920194"
  }
}
```

---

### 4Ô∏è‚É£ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è AMO CRM

**–í –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É:**
1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "–í—ñ–¥–∫–ª—é—á–∏—Ç–∏ AMO CRM"
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Endpoint `POST /api/amo-crm/disconnect` –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
- –¢–æ–∫–µ–Ω–∏ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –°—Ç–∞—Ç—É—Å AMO CRM –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –Ω–∞ "–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ"

**API —Ç–µ—Å—Ç:**
```bash
curl -X POST https://admin.foryou-realestate.com/api/amo-crm/disconnect \
  -H "Authorization: Bearer <user_jwt_token>"
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "success": true,
  "message": "AMO CRM disconnected"
}
```

---

### 5Ô∏è‚É£ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è leads

**–í –º–æ–±—ñ–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É:**
1. –ü—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è AMO CRM –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è leads
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é –ø–æ —Å—Ç–∞–¥—ñ—è—Ö

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- Leads –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
- –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫

---

## üîç –©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤ backend

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ callback endpoint

**–§–∞–π–ª:** `admin-panel-backend/src/routes/amo-crm.routes.ts`

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ endpoint:
- [ ] –ü—Ä–∏–π–º–∞—î `code` —Ç–∞ `state` –∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- [ ] –û–±–º—ñ–Ω—é—î `code` –Ω–∞ —Ç–æ–∫–µ–Ω–∏ —á–µ—Ä–µ–∑ AMO CRM API
- [ ] –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ deep link `foryoure://amo-crm/callback?code=...`
- [ ] –û–±—Ä–æ–±–ª—è—î –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –∑ `error` –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –Ø–∫—â–æ `res.redirect()` –Ω–µ –ø—Ä–∞—Ü—é—î –∑ deep links, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ HTML —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ JavaScript redirect (–¥–∏–≤. `AMO_CRM_CALLBACK_REDIRECT_FIX.md`)

---

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ exchange-code endpoint

**–§–∞–π–ª:** `admin-panel-backend/src/routes/amo-crm.routes.ts`

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ endpoint:
- [ ] –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î middleware `authenticate` (JWT)
- [ ] –ü—Ä–∏–π–º–∞—î `{ code: string }` –≤ body
- [ ] –û–±–º—ñ–Ω—é—î code –Ω–∞ —Ç–æ–∫–µ–Ω–∏ —á–µ—Ä–µ–∑ AMO CRM API
- [ ] –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (`user.id` –∑ JWT)
- [ ] –ü–æ–≤–µ—Ä—Ç–∞—î —É—Å–ø—ñ—à–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å

---

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤

**–§–∞–π–ª:** `admin-panel-backend/src/services/amo-crm.service.ts`

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ:
- [ ] –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Ç–∞–±–ª–∏—Ü—ñ `AmoCrmToken`
- [ ] –¢–æ–∫–µ–Ω–∏ –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ `userId` (–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ)
- [ ] `expiresAt` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –¢–æ–∫–µ–Ω–∏ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è –ø—Ä–∏ refresh

---

## ‚ö†Ô∏è –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Callback –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î –Ω–∞ deep link

**–°–∏–º–ø—Ç–æ–º–∏:**
- –ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –≤ AMO CRM –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ backend
- –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –Ω–µ –æ—Ç—Ä–∏–º—É—î callback

**–†—ñ—à–µ–Ω–Ω—è:**
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ HTML —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑ JavaScript redirect –∑–∞–º—ñ—Å—Ç—å `res.redirect()`
- –î–∏–≤. `AMO_CRM_CALLBACK_REDIRECT_FIX.md`

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ (–Ω–µ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)

**–°–∏–º–ø—Ç–æ–º–∏:**
- –ü—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è AMO CRM —Ç–æ–∫–µ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º
- –°—Ç–∞—Ç—É—Å AMO CRM –ø–æ–∫–∞–∑—É—î "–ü—ñ–¥–∫–ª—é—á–µ–Ω–æ" –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `exchangeCode` –∑–±–µ—Ä—ñ–≥–∞—î —Ç–æ–∫–µ–Ω–∏ –∑ `userId`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `getConnectionStatus` –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: 404 –Ω–∞ callback endpoint

**–°–∏–º–ø—Ç–æ–º–∏:**
- –ü—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –≤ AMO CRM –æ—Ç—Ä–∏–º—É—î—Ç–µ 404
- URL –≤ –±—Ä–∞—É–∑–µ—Ä—ñ: `https://admin.foryou-realestate.com/api/amo-crm/callback?code=...`

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ä–æ—É—Ç `/api/amo-crm/callback` –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π –≤ `server.ts`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ñ–∞–π–ª `amo-crm.routes.ts` —ñ—Å–Ω—É—î —Ç–∞ –µ–∫—Å–ø–æ—Ä—Ç—É—î —Ä–æ—É—Ç–µ—Ä

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: 401 –Ω–∞ exchange-code endpoint

**–°–∏–º–ø—Ç–æ–º–∏:**
- –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –æ—Ç—Ä–∏–º—É—î 401 –ø—Ä–∏ –≤–∏–∫–ª–∏–∫—É `POST /api/amo-crm/exchange-code`
- –ü–æ–º–∏–ª–∫–∞: "Unauthorized"

**–†—ñ—à–µ–Ω–Ω—è:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ JWT —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ header: `Authorization: Bearer <token>`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Ç–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π —Ç–∞ –Ω–µ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ middleware `authenticate` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª—è—î —Ç–æ–∫–µ–Ω

---

## üìù –õ–æ–≥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### Backend –ª–æ–≥–∏

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ backend –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ:
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è callback –∑ `code`
- –û–±–º—ñ–Ω `code` –Ω–∞ —Ç–æ–∫–µ–Ω–∏
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ –≤ –ë–î
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –Ω–∞ deep link

### –ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –ª–æ–≥–∏

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É:
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è deep link callback
- –í–∏–∫–ª–∏–∫ `POST /api/amo-crm/exchange-code`
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É AMO CRM

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. ‚úÖ OAuth flow –ø—Ä–∞—Ü—é—î –≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É –¥–æ –∫—ñ–Ω—Ü—è
2. ‚úÖ –¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
3. ‚úÖ –°—Ç–∞—Ç—É—Å AMO CRM –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è AMO CRM –ø—Ä–∞—Ü—é—î
5. ‚úÖ Leads –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –ø—ñ—Å–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
6. ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—ñ

---

**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** –°—ñ—á–µ–Ω—å 2025
