# –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Favorites API –∑ –±–µ–∫–µ–Ω–¥–æ–º

## ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### 1. –°—Ç–≤–æ—Ä–µ–Ω–æ API –∫–ª—ñ—î–Ω—Ç –¥–ª—è favorites

**–§–∞–π–ª:** `mobile/api/favorites.ts`

–ú—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ favorites API:
- `getAll()` - –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —É–ª—é–±–ª–µ–Ω—ñ properties
- `getIds()` - –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ ID (–¥–ª—è —à–≤–∏–¥–∫–æ—ó —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó)
- `checkStatus(propertyId)` - –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
- `add(propertyId)` - –¥–æ–¥–∞—Ç–∏ –≤ —É–ª—é–±–ª–µ–Ω—ñ
- `remove(propertyId)` - –≤–∏–¥–∞–ª–∏—Ç–∏ –∑ —É–ª—é–±–ª–µ–Ω–∏—Ö

### 2. –û–Ω–æ–≤–ª–µ–Ω–æ favorites store –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é

**–§–∞–π–ª:** `mobile/store/favoritesStore.ts`

#### –ù–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω–Ω—ñ
- ‚úÖ **–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º** - –ª–æ–∫–∞–ª—å–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—î –Ω–∞–≤—ñ—Ç—å –±–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - favorites –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤—Ö–æ–¥—ñ
- ‚úÖ **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó** - `isSyncing` —Ç–∞ `lastSyncTime`

#### –ú–µ—Ç–æ–¥–∏:
- `addFavorite(id)` - –¥–æ–¥–∞—î –ª–æ–∫–∞–ª—å–Ω–æ —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑ —Å–µ—Ä–≤–µ—Ä–æ–º
- `removeFavorite(id)` - –≤–∏–¥–∞–ª—è—î –ª–æ–∫–∞–ª—å–Ω–æ —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑ —Å–µ—Ä–≤–µ—Ä–æ–º
- `toggleFavorite(id)` - –ø–µ—Ä–µ–º–∏–∫–∞—î —Å—Ç–∞–Ω –∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é
- `syncFromServer()` - –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î favorites –∑ —Å–µ—Ä–≤–µ—Ä–∞
- `syncToServer(ids)` - –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ª–æ–∫–∞–ª—å–Ω—ñ favorites –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è

#### –ü—Ä–∏ –≤—Ö–æ–¥—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
- –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ª–æ–≥—ñ–Ω—É favorites –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∑ —Å–µ—Ä–≤–µ—Ä–∞
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ `mobile/store/authStore.ts`

#### –ü—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∫—É:
- –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π, favorites —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—é—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
- –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –≤ `mobile/app/_layout.tsx`

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è URL

**–í–∞–∂–ª–∏–≤–æ:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ URL –¥–ª—è favorites API!

–ü–æ—Ç–æ—á–Ω–∏–π baseURL –≤ `backendApiClient`: `https://foryou-realestate.com/api/v1`

–¢–æ–º—É favorites endpoints –±—É–¥—É—Ç—å:
- `GET https://foryou-realestate.com/api/v1/favorites`
- `GET https://foryou-realestate.com/api/v1/favorites/ids`
- `POST https://foryou-realestate.com/api/v1/favorites/:propertyId`
- `DELETE https://foryou-realestate.com/api/v1/favorites/:propertyId`

–Ø–∫—â–æ –≤–∞—à—ñ favorites endpoints –Ω–∞ `/api/favorites` (–±–µ–∑ `/v1`), —Ç–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ:

1. **–í–∞—Ä—ñ–∞–Ω—Ç 1:** –ó–º—ñ–Ω–∏—Ç–∏ baseURL –≤ `backendApiClient.ts`:
```typescript
const BACKEND_API_URL = 'https://foryou-realestate.com/api';
```

2. **–í–∞—Ä—ñ–∞–Ω—Ç 2:** –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π –∫–ª—ñ—î–Ω—Ç –¥–ª—è favorites:
```typescript
const FAVORITES_API_URL = 'https://foryou-realestate.com/api';
export const favoritesApiClient = axios.create({
  baseURL: FAVORITES_API_URL,
  // ...
});
```

## üì± –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤ —É–ª—é–±–ª–µ–Ω—ñ:
```typescript
import { useFavoritesStore } from '@/store/favoritesStore';

const { toggleFavorite } = useFavoritesStore();

// –î–æ–¥–∞—Ç–∏/–≤–∏–¥–∞–ª–∏—Ç–∏ favorite
await toggleFavorite(propertyId);
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É:
```typescript
const { isFavorite } = useFavoritesStore();
const isFav = isFavorite(propertyId);
```

### –†—É—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è:
```typescript
const { syncFromServer, syncToServer } = useFavoritesStore();

// –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞
await syncFromServer();

// –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
await syncToServer(favoriteIds);
```

## üîÑ –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏

### –î–æ–¥–∞–≤–∞–Ω–Ω—è favorite:
1. ‚úÖ –û–Ω–æ–≤–ª—é—î –ª–æ–∫–∞–ª—å–Ω–∏–π store –æ–¥—Ä–∞–∑—É (–¥–ª—è –º–∏—Ç—Ç—î–≤–æ–≥–æ UI)
2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑ —Å–µ—Ä–≤–µ—Ä–æ–º —É —Ñ–æ–Ω—ñ
3. ‚úÖ –Ø–∫—â–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–µ –≤–¥–∞–ª–∞—Å—è - –¥–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
4. ‚úÖ –ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó –¥–∞–Ω—ñ –±—É–¥—É—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ

### –í–∏–¥–∞–ª–µ–Ω–Ω—è favorite:
1. ‚úÖ –û–Ω–æ–≤–ª—é—î –ª–æ–∫–∞–ª—å–Ω–∏–π store –æ–¥—Ä–∞–∑—É
2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î –∑ —Å–µ—Ä–≤–µ—Ä–æ–º —É —Ñ–æ–Ω—ñ
3. ‚úÖ –Ø–∫—â–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –Ω–µ –≤–¥–∞–ª–∞—Å—è - –¥–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ

### –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∑ —Å–µ—Ä–≤–µ—Ä–∞:
1. ‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ ID –∑ —Å–µ—Ä–≤–µ—Ä–∞
2. ‚úÖ –û–Ω–æ–≤–ª—é—î –ª–æ–∫–∞–ª—å–Ω–∏–π store
3. ‚úÖ –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ 401 - –æ—á–∏—â–∞—î favorites (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π)
4. ‚úÖ –Ü–Ω—à—ñ –ø–æ–º–∏–ª–∫–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ñ - –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ

## üõ°Ô∏è –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

- **401 Unauthorized** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π, favorites –æ—á–∏—â–∞—é—Ç—å—Å—è
- **–Ü–Ω—à—ñ –ø–æ–º–∏–ª–∫–∏** - –ª–æ–∫–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è, —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
- **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É** - –ø—Ä–∞—Ü—é—î –≤ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—ñ –∑ –ª–æ–∫–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º** - favorites –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞–≤—ñ—Ç—å –±–µ–∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∑–∞–≤–¥—è–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—é
2. **–Ü–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å** - –æ–ø–µ—Ä–∞—Ü—ñ—ó –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ sync –≤—Ä—É—á–Ω—É
4. **–õ–æ–≥—É–≤–∞–Ω–Ω—è** - –≤—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –ª–æ–≥—É—é—Ç—å—Å—è –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## üöÄ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. ‚úÖ –î–æ–¥–∞–≤–∞–Ω–Ω—è favorite –ø—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ —Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
2. ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è favorite –ø—Ä–∞—Ü—é—î –ª–æ–∫–∞–ª—å–Ω–æ —Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
3. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –≤—Ö–æ–¥—ñ –ø—Ä–∞—Ü—é—î
4. ‚úÖ –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º –ø—Ä–∞—Ü—é—î
5. ‚úÖ Favorites –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –º—ñ–∂ —Å–µ—Å—ñ—è–º–∏

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–£–≤—ñ–º–∫–Ω—ñ—Ç—å –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- `üîÑ Syncing favorites...` - –ø–æ—á–∞—Ç–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó
- `‚úÖ Synced favorites...` - —É—Å–ø—ñ—à–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è
- `‚ö†Ô∏è Failed to sync...` - –ø–æ–º–∏–ª–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞)























